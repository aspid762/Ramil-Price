# Учет продаж металлопроката

Веб-приложение для учета продаж металлопроката, управления складом и формирования отчетов.

## Установка и запуск

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/yourusername/metal-sales.git
   cd metal-sales
   ```

2. Создайте и активируйте виртуальное окружение:
   ```bash
   python -m venv venv
   source venv/bin/activate  # для Linux/Mac
   venv\Scripts\activate     # для Windows
   ```

3. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

4. Настройте переменные окружения:
   ```bash
   cp .env.example .env
   # Отредактируйте файл .env, указав необходимые параметры
   ```

5. Инициализируйте базу данных:
   ```bash
   flask db upgrade
   ```

6. Запустите приложение:
   ```bash
   python app.py
   ```

7. Откройте в браузере http://localhost:5000

## Основные функции

### Прайс-лист
- Управление товарами в прайс-листе
- История изменения цен
- Экспорт и импорт данных в Excel

### Заказчики
- Управление базой заказчиков
- Индивидуальные наценки и стоимость доставки
- Экспорт и импорт данных в Excel

### Заказы
- Создание и управление заказами
- Добавление товаров из прайс-листа или со склада
- Отслеживание статуса заказов
- Экспорт заказов в Excel

### Склад
- Учет товаров на складе
- Отслеживание движения товаров
- Резервирование товаров под заказы
- Экспорт и импорт данных в Excel

### Отчеты
- Формирование различных отчетов
- Экспорт отчетов в Excel

### Аналитика
- Анализ продаж по периодам
- Анализ продаж по категориям товаров
- Анализ заказчиков
- Визуализация данных с помощью графиков

## Управление миграциями базы данных

Для управления изменениями структуры базы данных используется Flask-Migrate.

### Создание новой миграции

После изменения моделей в `models.py` создайте новую миграцию:

```bash
flask db migrate -m "Описание изменений"
```

### Применение миграций

```bash
flask db upgrade
```

Подробнее о миграциях см. в файле [migrations.md](migrations.md).

## Структура проекта

- `app.py` - основной файл приложения
- `config.py` - конфигурация приложения
- `models.py` - модели данных
- `routes/` - маршруты приложения
- `templates/` - шаблоны страниц
- `static/` - статические файлы (CSS, JavaScript)
- `utils/` - вспомогательные функции
- `migrations/` - файлы миграций базы данных

## Лицензия

MIT


